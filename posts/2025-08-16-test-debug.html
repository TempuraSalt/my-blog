<!doctype html>
<html lang="ja">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <title>デバッグ再現：2025-08-16 テスト記事 — ブログ</title>

  <!-- 自動生成スクリプトが読み取りやすいメタ -->
  <meta name="description" content="2025-08-15 の状況を再現するためのテスト記事。画像読み込みと posts.json の影響を検証します。">
  <meta name="date" content="2025-08-16">
  <meta name="tags" content="debug, repro, images">

  <!-- *カバーはトップ表示で使われる想定の meta（重要）* -->
  <meta name="cover" content="/my-blog/images/food_bunka_fry.jpg">

  <meta property="og:title" content="デバッグ再現：2025-08-16 テスト記事">
  <meta property="og:description" content="画像読み込みと自動化の副作用を検証するためのテスト記事です。">
  <meta property="og:image" content="/my-blog/images/food_bunka_fry.jpg">

  <link rel="stylesheet" href="/my-blog/style.css">
  <script src="/my-blog/common.js" defer></script>
</head>
<body>
  <div id="site-header"></div>

  <main class="container">
    <article class="post-card">
      <h1>デバッグ再現：2025-08-16 テスト記事</h1>
      <div class="post-meta">2025-08-16</div>

      <!-- カバー画像 -->
      <figure>
        <img src="/my-blog/images/food_bunka_fry.jpg"
             alt="フライ料理（デバッグ用カバー）"
             loading="lazy"
             style="width:100%;height:auto;border-radius:6px;">
        <figcaption style="font-size:0.9rem;color:#666;margin-top:6px;">デバッグ用カバー：food_bunka_fry</figcaption>
      </figure>

      <div class="post-body">
        <p>
          目的は、2025-08-15 に発生した現象を再現し、次の 2 点の原因究明を行うことです：
        </p>
        <ol>
          <li>更新した記事（新規または更新）の本文中の画像が表示されなくなる原因</li>
          <li>その更新操作の後、既存の記事（更新対象以外）のトップサムネイルが消える原因</li>
        </ol>

        <p>
          本記事は 2025-08-15 の記事と同じ **構造**（head の meta、カバーの `<picture>` パターン、common.js の include）を持たせています。ただし本文は検証用に短くまとめています。これにより「記事追加→ワークフロー実行→副作用が出るか」を対照的に比較できます。
        </p>

        <p>
          次に本文内の画像を順に配置します。ここで重要なのは、カバー同様に一部の `<picture>` では `.webp` を `source` に指定している点です（.webp が無ければ Network に 404 が出るはず）。また、通常の PNG/JPG は直接 `<img>` として挿入します。
        </p>

        <!-- 画像1: food_bunka_fry -->
        <figure style="margin:18px 0;">
          <img src="/my-blog/images/food_bunka_fry.jpg" alt="food_bunka_fry" loading="lazy" style="width:100%;height:auto;border-radius:6px;">
          <figcaption style="font-size:0.9rem;color:#666;margin-top:6px;">food_bunka_fry.jpg — カバーと同じ画像（再現検証用）。</figcaption>
        </figure>

        <!-- 画像2: food_za-sai (PNG) -->
        <figure style="margin:18px 0;">
          <img src="/my-blog/images/food_za-sai.png" alt="food_za-sai" loading="lazy" style="width:100%;height:auto;border-radius:6px;">
          <figcaption style="font-size:0.9rem;color:#666;margin-top:6px;">food_za-sai.png — PNG の直接挿入。</figcaption>
        </figure>

        <!-- 画像3: test-sample-image -->
        <figure style="margin:18px 0;">
          <img src="/my-blog/images/test-sample-image.jpg" alt="test-sample-image" loading="lazy" style="width:100%;height:auto;border-radius:6px;">
          <figcaption style="font-size:0.9rem;color:#666;margin-top:6px;">test-sample-image.jpg — 検証用ラスト。</figcaption>
        </figure>

        <p>
          対照実験の手順（簡易）：
          <ol>
            <li>このファイルを push → Actions トリガーで generate_posts_json が走る（既設のワークフローがある前提）</li>
            <li>ワークフロー実行後に posts.json の該当エントリ（cover）と images/ フォルダの状態を確認</li>
            <li>トップ（/my-blog/）と本ページを開き、Network と Console を比較（特に .webp の 404、.jpg/.png の 200、posts.json の cover 値）</li>
          </ol>
        </p>

        <p>
          実験結果を得たらそのまま結果を共有してください。私がログ（Actions / posts.json の履歴 / Network のレスポンス）を解析して、どのステップで cover が消えたり画像が表示されなくなったかを突き止めます。
        </p>
      </div>
    </article>

    <p><a href="/my-blog/">← 記事一覧に戻る</a></p>
  </main>

  <div id="site-footer"></div>
</body>
</html>
